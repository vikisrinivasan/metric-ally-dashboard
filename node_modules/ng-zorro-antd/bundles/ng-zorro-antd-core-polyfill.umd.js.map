{"version":3,"file":"ng-zorro-antd-core-polyfill.umd.js","sources":["ng-zorro-antd/core/polyfill/request-animation.ts"],"names":[],"mappings":";;;;;;;;;;;;;QAOM,iBAAiB,GAAG,CAAC,KAAK,EAAE,IAAI,EAAE,QAAQ,CAAC;AACjD;AACO;AAAmB;AAAQ,IAAlC,SAAS,6BAA6B;AAAK;AAAyB,YAC9D,QAAQ,GAAG,CAAC;AAClB,QAAE;AAAY;AAA+B;AACtC;AAAY,QADV,UAAU,QAA8B;AAAI;AAChC,gBAAX,QAAQ,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE;AACzC;AAA6B,gBAAnB,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,IAAI,QAAQ,GAAG,QAAQ,CAAC,CAAC;AAC9D;AAA6B,gBAAnB,EAAE,GAAG,UAAU;AAAM;AACP;AACvB,YAFyB;AACpB,gBAAA,QAAQ,CAAC,QAAQ,GAAG,UAAU,CAAC,CAAC;AACtC,aAAK,GAAE,UAAU,CAAC;AAClB,YAAI,QAAQ,GAAG,QAAQ,GAAG,UAAU,CAAC;AACrC,YAAI,OAAO,EAAE,CAAC;AACd,SAAG,EAAC;AACJ,IAAA,CAAC;AACD;AACO;AAAmB;AAAQ,IAAlC,SAAS,wBAAwB;AAAK,QACpC,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;AACrC,YAAI;AAAY;AAEG;AAAgB,YAFxB,cAAM,OAAA,CAAC,GAAA,EAAC;AACnB,SAAG;AACH,QAAE,IAAI,MAAM,CAAC,qBAAqB,EAAE;AACpC;AACQ,YAAJ,OAAO,MAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACrD,SAAG;AACH;AACwB,YAAhB,MAAM,GAAG,iBAAiB,CAAC,MAAM;AAAM;AAA0B;AAExE;AAAY,QAF6B,UAAA,GAAG,IAAI,OAAG,GAAG,0BAAuB,IAAI,MAAM,GAAA,EAAC,CAAC,CAAC,CAAC;AAC5F,QACE,OAAO,MAAM,GAAG,oBAAC,MAAM,IAAkB,MAAM,0BAAuB,CAAC,GAAG,6BAA6B,EAAE,CAAC;AAC5G,IAAA,CAAC;AACD;AAAQ;AAAqB;AAAmB;AAAQ,aAAxC,2BAA2B,CAAC,EAAU;AAAI,QACxD,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;AACrC,YAAI,OAAO,IAAI,CAAC;AAChB,SAAG;AACH,QAAE,IAAI,MAAM,CAAC,oBAAoB,EAAE;AACnC,YAAI,OAAO,MAAM,CAAC,oBAAoB,CAAC,EAAE,CAAC,CAAC;AAC3C,SAAG;AACH;AAAyB,YAAjB,MAAM,GAAG,iBAAiB,CAAC,MAAM;AACrC;AAA0B;AAAuB;AAAY,QAA7D,UAAA,GAAG,IAAI,OAAG,GAAG,yBAAsB,IAAI,MAAM,IAAO,GAAG,gCAA6B,IAAI,MAAM,GAAA,EAC/F,CAAC,CAAC,CAAC;AACN,QACE,OAAO,MAAM;AACf,cAAM,CAAC,oBAAC,MAAM,IAAkB,MAAM,yBAAsB,CAAC,IAAI,oBAAC,MAAM,IAAkB,MAAM,gCAA6B,CAAC;AAC9H;AACQ,iBAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC;AACvB,cAAM,YAAY,CAAC,EAAE,CAAC,CAAC;AACvB,IAAA,CAAC;AACD;AACoB,QAAP,YAAY,GAAG,wBAAwB;AACpD;AAAC;AAAuE;AAAyC;AAAC;AAAmE;AAAC;AAAM","sourcesContent":["/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nimport { NzSafeAny } from 'ng-zorro-antd/core/types';\n\n// tslint:disable: typedef no-invalid-this\nconst availablePrefixes = ['moz', 'ms', 'webkit'];\n\nfunction requestAnimationFramePolyfill(): typeof requestAnimationFrame {\n  let lastTime = 0;\n  return function (callback: FrameRequestCallback): number {\n    const currTime = new Date().getTime();\n    const timeToCall = Math.max(0, 16 - (currTime - lastTime));\n    const id = setTimeout(() => {\n      callback(currTime + timeToCall);\n    }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return id;\n  };\n}\n\nfunction getRequestAnimationFrame(): typeof requestAnimationFrame {\n  if (typeof window === 'undefined') {\n    return () => 0;\n  }\n  if (window.requestAnimationFrame) {\n    // https://github.com/vuejs/vue/issues/4465\n    return window.requestAnimationFrame.bind(window);\n  }\n\n  const prefix = availablePrefixes.filter(key => `${key}RequestAnimationFrame` in window)[0];\n\n  return prefix ? (window as NzSafeAny)[`${prefix}RequestAnimationFrame`] : requestAnimationFramePolyfill();\n}\nexport function cancelRequestAnimationFrame(id: number): NzSafeAny {\n  if (typeof window === 'undefined') {\n    return null;\n  }\n  if (window.cancelAnimationFrame) {\n    return window.cancelAnimationFrame(id);\n  }\n  const prefix = availablePrefixes.filter(\n    key => `${key}CancelAnimationFrame` in window || `${key}CancelRequestAnimationFrame` in window\n  )[0];\n\n  return prefix\n    ? ((window as NzSafeAny)[`${prefix}CancelAnimationFrame`] || (window as NzSafeAny)[`${prefix}CancelRequestAnimationFrame`])\n        // @ts-ignore\n        .call(this, id)\n    : clearTimeout(id);\n}\n\nexport const reqAnimFrame = getRequestAnimationFrame();\n"]}