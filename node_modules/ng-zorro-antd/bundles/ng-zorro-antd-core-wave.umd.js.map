{"version":3,"file":"ng-zorro-antd-core-wave.umd.js","sources":["ng-zorro-antd/core/wave/nz-wave-renderer.ts","ng-zorro-antd/core/wave/nz-wave.directive.ts","ng-zorro-antd/core/wave/nz-wave.module.ts"],"names":["Platform","InjectionToken","Directive","NgZone","ElementRef","Optional","Inject","ANIMATION_MODULE_TYPE","Input","NgModule","PlatformModule"],"mappings":"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","sourcesContent":["/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { Platform } from '@angular/cdk/platform';\nimport { NgZone } from '@angular/core';\n\nexport class NzWaveRenderer {\n  private waveTransitionDuration = 400;\n  private styleForPseudo: HTMLStyleElement | null = null;\n  private extraNode: HTMLDivElement | null = null;\n  private lastTime = 0;\n  private platform = new Platform();\n  clickHandler: () => void;\n  get waveAttributeName(): string {\n    return this.insertExtraNode ? 'ant-click-animating' : 'ant-click-animating-without-extra-node';\n  }\n\n  constructor(private triggerElement: HTMLElement, private ngZone: NgZone, private insertExtraNode: boolean) {\n    this.clickHandler = this.onClick.bind(this);\n    this.bindTriggerEvent();\n  }\n\n  onClick = (event: MouseEvent) => {\n    if (\n      !this.triggerElement ||\n      !this.triggerElement.getAttribute ||\n      this.triggerElement.getAttribute('disabled') ||\n      (event.target as HTMLElement).tagName === 'INPUT' ||\n      this.triggerElement.className.indexOf('disabled') >= 0\n    ) {\n      return;\n    }\n    this.fadeOutWave();\n  };\n\n  bindTriggerEvent(): void {\n    if (this.platform.isBrowser) {\n      this.ngZone.runOutsideAngular(() => {\n        this.removeTriggerEvent();\n        if (this.triggerElement) {\n          this.triggerElement.addEventListener('click', this.clickHandler, true);\n        }\n      });\n    }\n  }\n\n  removeTriggerEvent(): void {\n    if (this.triggerElement) {\n      this.triggerElement.removeEventListener('click', this.clickHandler, true);\n    }\n  }\n\n  removeStyleAndExtraNode(): void {\n    if (this.styleForPseudo && document.body.contains(this.styleForPseudo)) {\n      document.body.removeChild(this.styleForPseudo);\n      this.styleForPseudo = null;\n    }\n    if (this.insertExtraNode && this.triggerElement.contains(this.extraNode)) {\n      this.triggerElement.removeChild(this.extraNode as Node);\n    }\n  }\n\n  destroy(): void {\n    this.removeTriggerEvent();\n    this.removeStyleAndExtraNode();\n  }\n\n  private fadeOutWave(): void {\n    const node = this.triggerElement;\n    const waveColor = this.getWaveColor(node);\n    node.setAttribute(this.waveAttributeName, 'true');\n    if (Date.now() < this.lastTime + this.waveTransitionDuration) {\n      return;\n    }\n\n    if (this.isValidColor(waveColor)) {\n      if (!this.styleForPseudo) {\n        this.styleForPseudo = document.createElement('style');\n      }\n\n      this.styleForPseudo.innerHTML = `\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ${waveColor};\n      }`;\n      document.body.appendChild(this.styleForPseudo);\n    }\n\n    if (this.insertExtraNode) {\n      if (!this.extraNode) {\n        this.extraNode = document.createElement('div');\n      }\n      this.extraNode.className = 'ant-click-animating-node';\n      node.appendChild(this.extraNode);\n    }\n\n    this.lastTime = Date.now();\n\n    this.runTimeoutOutsideZone(() => {\n      node.removeAttribute(this.waveAttributeName);\n      this.removeStyleAndExtraNode();\n    }, this.waveTransitionDuration);\n  }\n\n  private isValidColor(color: string): boolean {\n    return (\n      !!color &&\n      color !== '#ffffff' &&\n      color !== 'rgb(255, 255, 255)' &&\n      this.isNotGrey(color) &&\n      !/rgba\\(\\d*, \\d*, \\d*, 0\\)/.test(color) &&\n      color !== 'transparent'\n    );\n  }\n\n  private isNotGrey(color: string): boolean {\n    const match = color.match(/rgba?\\((\\d*), (\\d*), (\\d*)(, [\\.\\d]*)?\\)/);\n    if (match && match[1] && match[2] && match[3]) {\n      return !(match[1] === match[2] && match[2] === match[3]);\n    }\n    return true;\n  }\n\n  private getWaveColor(node: HTMLElement): string {\n    const nodeStyle = getComputedStyle(node);\n    return (\n      nodeStyle.getPropertyValue('border-top-color') || // Firefox Compatible\n      nodeStyle.getPropertyValue('border-color') ||\n      nodeStyle.getPropertyValue('background-color')\n    );\n  }\n\n  private runTimeoutOutsideZone(fn: () => void, delay: number): void {\n    this.ngZone.runOutsideAngular(() => setTimeout(fn, delay));\n  }\n}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { Directive, ElementRef, Inject, InjectionToken, Input, NgZone, OnDestroy, OnInit, Optional } from '@angular/core';\nimport { ANIMATION_MODULE_TYPE } from '@angular/platform-browser/animations';\nimport { NzWaveRenderer } from './nz-wave-renderer';\n\nexport interface NzWaveConfig {\n  disabled?: boolean;\n}\n\nexport const NZ_WAVE_GLOBAL_DEFAULT_CONFIG: NzWaveConfig = {\n  disabled: false\n};\n\nexport const NZ_WAVE_GLOBAL_CONFIG = new InjectionToken<NzWaveConfig>('nz-wave-global-options', {\n  providedIn: 'root',\n  factory: NZ_WAVE_GLOBAL_CONFIG_FACTORY\n});\n\nexport function NZ_WAVE_GLOBAL_CONFIG_FACTORY(): NzWaveConfig {\n  return NZ_WAVE_GLOBAL_DEFAULT_CONFIG;\n}\n\n@Directive({\n  selector: '[nz-wave],button[nz-button]:not([nzType=\"link\"])',\n  exportAs: 'nzWave'\n})\nexport class NzWaveDirective implements OnInit, OnDestroy {\n  @Input() nzWaveExtraNode = false;\n\n  private waveRenderer?: NzWaveRenderer;\n  private waveDisabled: boolean = false;\n\n  get disabled(): boolean {\n    return this.waveDisabled;\n  }\n\n  get rendererRef(): NzWaveRenderer | undefined {\n    return this.waveRenderer;\n  }\n\n  constructor(\n    private ngZone: NgZone,\n    private elementRef: ElementRef,\n    @Optional() @Inject(NZ_WAVE_GLOBAL_CONFIG) private config: NzWaveConfig,\n    @Optional() @Inject(ANIMATION_MODULE_TYPE) private animationType: string\n  ) {\n    this.waveDisabled = this.isConfigDisabled();\n  }\n\n  isConfigDisabled(): boolean {\n    let disabled = false;\n    if (this.config && typeof this.config.disabled === 'boolean') {\n      disabled = this.config.disabled;\n    }\n    if (this.animationType === 'NoopAnimations') {\n      disabled = true;\n    }\n    return disabled;\n  }\n\n  ngOnDestroy(): void {\n    if (this.waveRenderer) {\n      this.waveRenderer.destroy();\n    }\n  }\n\n  ngOnInit(): void {\n    this.renderWaveIfEnabled();\n  }\n\n  renderWaveIfEnabled(): void {\n    if (!this.waveDisabled && this.elementRef.nativeElement) {\n      this.waveRenderer = new NzWaveRenderer(this.elementRef.nativeElement, this.ngZone, this.nzWaveExtraNode);\n    }\n  }\n\n  disable(): void {\n    this.waveDisabled = true;\n    if (this.waveRenderer) {\n      this.waveRenderer.removeTriggerEvent();\n      this.waveRenderer.removeStyleAndExtraNode();\n    }\n  }\n\n  enable(): void {\n    // config priority\n    this.waveDisabled = this.isConfigDisabled() || false;\n    if (this.waveRenderer) {\n      this.waveRenderer.bindTriggerEvent();\n    }\n  }\n}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { PlatformModule } from '@angular/cdk/platform';\nimport { NgModule } from '@angular/core';\nimport { NzWaveDirective } from './nz-wave.directive';\n\n@NgModule({\n  imports: [PlatformModule],\n  exports: [NzWaveDirective],\n  declarations: [NzWaveDirective]\n})\nexport class NzWaveModule {}\n"]}