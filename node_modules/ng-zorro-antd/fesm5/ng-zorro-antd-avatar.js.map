{"version":3,"file":"ng-zorro-antd-avatar.js","sources":["ng-zorro-antd/avatar/avatar.component.ts","ng-zorro-antd/avatar/avatar.module.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { Platform } from '@angular/cdk/platform';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  Output,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\n\nimport { NzConfigService, WithConfig } from 'ng-zorro-antd/core/config';\nimport { NgClassInterface, NgStyleInterface, NzShapeSCType, NzSizeLDSType } from 'ng-zorro-antd/core/types';\n\nconst NZ_CONFIG_COMPONENT_NAME = 'avatar';\n\n@Component({\n  selector: 'nz-avatar',\n  exportAs: 'nzAvatar',\n  template: `\n    <i nz-icon *ngIf=\"nzIcon && hasIcon\" [nzType]=\"nzIcon\"></i>\n    <img *ngIf=\"nzSrc && hasSrc\" [src]=\"nzSrc\" [attr.srcset]=\"nzSrcSet\" [attr.alt]=\"nzAlt\" (error)=\"imgError($event)\" />\n    <span class=\"ant-avatar-string\" #textEl [ngStyle]=\"textStyles\" *ngIf=\"nzText && hasText\">{{ nzText }}</span>\n  `,\n  host: {\n    '[class.ant-avatar]': 'true',\n    '[class.ant-avatar-lg]': `nzSize === 'large'`,\n    '[class.ant-avatar-sm]': `nzSize === 'small'`,\n    '[class.ant-avatar-square]': `nzShape === 'square'`,\n    '[class.ant-avatar-circle]': `nzShape === 'circle'`,\n    '[class.ant-avatar-icon]': `nzIcon`,\n    '[class.ant-avatar-image]': `hasSrc `,\n    '[style.width]': 'customSize',\n    '[style.height]': 'customSize',\n    '[style.line-height]': 'customSize',\n    // nzSize type is number when customSize is true\n    '[style.font-size.px]': '(hasIcon && customSize) ? $any(nzSize) / 2 : null'\n  },\n  preserveWhitespaces: false,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None\n})\nexport class NzAvatarComponent implements OnChanges {\n  @Input() @WithConfig(NZ_CONFIG_COMPONENT_NAME) nzShape: NzShapeSCType = 'circle';\n  @Input() @WithConfig(NZ_CONFIG_COMPONENT_NAME) nzSize: NzSizeLDSType | number = 'default';\n  @Input() nzText?: string;\n  @Input() nzSrc?: string;\n  @Input() nzSrcSet?: string;\n  @Input() nzAlt?: string;\n  @Input() nzIcon?: string;\n  @Output() readonly nzError = new EventEmitter<Event>();\n\n  hasText: boolean = false;\n  hasSrc: boolean = true;\n  hasIcon: boolean = false;\n  textStyles: NgStyleInterface = {};\n  classMap: NgClassInterface = {};\n  customSize: string | null = null;\n\n  @ViewChild('textEl', { static: false }) textEl?: ElementRef;\n\n  private el: HTMLElement = this.elementRef.nativeElement;\n\n  constructor(\n    public nzConfigService: NzConfigService,\n    private elementRef: ElementRef,\n    private cdr: ChangeDetectorRef,\n    private platform: Platform\n  ) {}\n\n  imgError($event: Event): void {\n    this.nzError.emit($event);\n    if (!$event.defaultPrevented) {\n      this.hasSrc = false;\n      this.hasIcon = false;\n      this.hasText = false;\n      if (this.nzIcon) {\n        this.hasIcon = true;\n      } else if (this.nzText) {\n        this.hasText = true;\n      }\n      this.cdr.detectChanges();\n      this.setSizeStyle();\n      this.notifyCalc();\n    }\n  }\n\n  ngOnChanges(): void {\n    this.hasText = !this.nzSrc && !!this.nzText;\n    this.hasIcon = !this.nzSrc && !!this.nzIcon;\n    this.hasSrc = !!this.nzSrc;\n\n    this.setSizeStyle();\n    this.notifyCalc();\n  }\n\n  private calcStringSize(): void {\n    if (!this.hasText) {\n      return;\n    }\n\n    const childrenWidth = this.textEl!.nativeElement.offsetWidth;\n    const avatarWidth = this.el.getBoundingClientRect().width;\n    const scale = avatarWidth - 8 < childrenWidth ? (avatarWidth - 8) / childrenWidth : 1;\n    this.textStyles = {\n      transform: `scale(${scale}) translateX(-50%)`\n    };\n    if (this.customSize) {\n      Object.assign(this.textStyles, {\n        lineHeight: this.customSize\n      });\n    }\n    this.cdr.detectChanges();\n  }\n\n  private notifyCalc(): void {\n    // If use ngAfterViewChecked, always demands more computations, so......\n    if (this.platform.isBrowser) {\n      setTimeout(() => {\n        this.calcStringSize();\n      });\n    }\n  }\n\n  private setSizeStyle(): void {\n    if (typeof this.nzSize === 'number') {\n      this.customSize = `${this.nzSize}px`;\n    } else {\n      this.customSize = null;\n    }\n    this.cdr.markForCheck();\n  }\n}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nimport { PlatformModule } from '@angular/cdk/platform';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\n\nimport { NzAvatarComponent } from './avatar.component';\n\n@NgModule({\n  declarations: [NzAvatarComponent],\n  exports: [NzAvatarComponent],\n  imports: [CommonModule, NzIconModule, PlatformModule]\n})\nexport class NzAvatarModule {}\n"]}