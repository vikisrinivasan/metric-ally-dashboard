{"version":3,"file":"angular-fire-functions.umd.js","sources":["../../../src/functions/functions.ts","../../../src/functions/functions.module.ts"],"names":["InjectionToken","ɵAngularFireSchedulers","of","observeOn","switchMap","map","ɵfirebaseAppFactory","tap","shareReplay","from","ɵlazySDKProxy","Injectable","Inject","FIREBASE_OPTIONS","Optional","FIREBASE_APP_NAME","NgZone","NgModule"],"mappings":";;;;;;;;;;;;QAea,MAAM,GAAG,IAAIA,iBAAc,CAAS,+BAA+B;AAChF;AAAqB,QAAR,MAAM,GAAG,IAAIA,iBAAc,CAAS,+BAA+B;AAChF;AAEe;AAA4D;AAAY;AAG/E;AAGF;AAA2B;AAER;AAA6B;AAAY,QAEhE,8BAC4B,OAAwB,EACX,YAA2D,EAClG,IAAY,EACgB,MAAqB,EACrB,MAAqB;AAClD;AACuB,gBAAhB,UAAU,GAAG,IAAIC,yBAAsB,CAAC,IAAI,CAAC;AACvD;AAC4B,gBAAlB,SAAS,GAAGC,OAAE,CAAC,SAAS,CAAC,CAAC,IAAI,CAClCC,mBAAS,CAAC,UAAU,CAAC,cAAc,CAAC,EACpCC,mBAAS;AAAO;AAA2B,eAAjC,cAAM,OAAA,OAAO,oBAAoB,CAAC,GAAA,EAAC,EAC7CC,aAAG;AAAO;AAA2B,eAAjC,cAAM,OAAAC,sBAAmB,CAAC,OAAO,EAAE,IAAI,EAAE,YAAY,CAAC,GAAA,EAAC,EAC3DD,aAAG;AAAO;AAA8B;AAC3B,eADT;AAAc;AACxB;AACE,gBAFQ,GAAG,IAAI,OAAA,GAAG,CAAC,SAAS,CAAC,MAAM,IAAI,SAAS,CAAC,GAAA,EAAC,EAC9CE,aAAG;AAAO;AAEX;AAA2B,eAFtB;AAAc;AAEX;AAA2B,gBAF9B,SAAS;AAAI,gBACf,IAAI,MAAM,EAAE;AACpB,oBAAU,SAAS,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;AACjD,iBAAS;AACT,aAAO,EAAC,EACFC,qBAAW,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAChD;AACL,YACI,IAAI,CAAC,aAAa;AAAS;AAC/B;AAA+B;AACd,eAFQ,UAAmB,IAAY;AAC5C;AACV;AAA2B,eADvB,UAAC,IAAO,IAAK,OAAAC,SAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAC/BN,mBAAS,CAAC,UAAU,CAAC,aAAa,CAAC,EACnCC,mBAAS;AAAO;AAAoC;AAC1C,eADA;AAAc;AAAoC;AAC1C,gBADR,SAAS,IAAI,OAAA,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAA,EAAC,EAC3DC,aAAG;AAAO;AAGZ;AAA2B,eAHrB;AAAc;AAGZ;AAA2B,gBAH7B,CAAC,IAAI,0BAAA,CAAC,CAAC,IAAI,KAAK,EAAC,CACtB,GAAA,IAAA,CAAA,CAAC;AACR,YACI,OAAOK,gBAAa,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,CAAC;AAChD;;;;;;;;;;;;;;;;;;;;;;;;;kCACG;AACH;AAEkC,SAtCzB;AAAC;iCAHTC,aAAU,SAAC,vDAGqB;YAF/B,UAAU,EAAE,KAAK,kBAClB,/CAG4D,gDAGxDC,SAAM,SAACC,mBAAgB;AAAS,gDAChCC,WAAQ,YAAIF,SAAM,SAACG,oBAAiB;AAAS,gBA/BLC,SAAM;AAAI,gDAiClDF,WAAQ,YAAIF,SAAM,SAAC,MAAM;AAAS,gDAClCE,WAAQ,YAAIF,SAAM,SAAC,MAAM;AAAQ;AAAU;AAU7C;AAAiB;AACG,QAlBrB,6CAA8F;AAChG;AACK;AAAC;AAAQ;AACuB;AACb;AAGxB;AAAQ;AAEM,QC9Bd;AAAwC;;;;;;;;gDACnC;AAAC;AAA2C,SADxC;AAAC;AAAC;AAAQ;eAHlBK,WAAQ,SAAC,nCAIG;oBAHX,SAAS,EAAE,CAAE,oBAAoB,CAAE,kBACpC,vEAEiD;AAAyJ;AAAQ;AAAC;AAAQ;AAAsC;AAAiD;AAAyJ;AAAQ;AAAC;AAAyD;AAAqE;AAA6B;AAA6B;AAAC;AAAmE;AAAC;AAAM","sourcesContent":["import { Inject, Injectable, InjectionToken, NgZone, Optional } from '@angular/core';\nimport { from, Observable, of } from 'rxjs';\nimport { map, observeOn, shareReplay, switchMap, tap } from 'rxjs/operators';\nimport {\n  FIREBASE_APP_NAME,\n  FIREBASE_OPTIONS,\n  FirebaseAppConfig,\n  FirebaseOptions,\n  ɵAngularFireSchedulers,\n  ɵfirebaseAppFactory,\n  ɵlazySDKProxy,\n  ɵPromiseProxy\n} from '@angular/fire';\nimport { functions } from 'firebase/app';\n\nexport const ORIGIN = new InjectionToken<string>('angularfire2.functions.origin');\nexport const REGION = new InjectionToken<string>('angularfire2.functions.region');\n\n// override httpsCallable for compatibility with 5.x\nexport interface AngularFireFunctions extends Omit<ɵPromiseProxy<functions.Functions>, 'httpsCallable'> {\n}\n\n@Injectable({\n  providedIn: 'any'\n})\nexport class AngularFireFunctions {\n\n  public readonly httpsCallable: <T = any, R = any>(name: string) => (data: T) => Observable<R>;\n\n  constructor(\n    @Inject(FIREBASE_OPTIONS) options: FirebaseOptions,\n    @Optional() @Inject(FIREBASE_APP_NAME) nameOrConfig: string | FirebaseAppConfig | null | undefined,\n    zone: NgZone,\n    @Optional() @Inject(REGION) region: string | null,\n    @Optional() @Inject(ORIGIN) origin: string | null\n  ) {\n    const schedulers = new ɵAngularFireSchedulers(zone);\n\n    const functions = of(undefined).pipe(\n      observeOn(schedulers.outsideAngular),\n      switchMap(() => import('firebase/functions')),\n      map(() => ɵfirebaseAppFactory(options, zone, nameOrConfig)),\n      map(app => app.functions(region || undefined)),\n      tap(functions => {\n        if (origin) {\n          functions.useFunctionsEmulator(origin);\n        }\n      }),\n      shareReplay({ bufferSize: 1, refCount: false })\n    );\n\n    this.httpsCallable = <T = any, R = any>(name: string) =>\n      (data: T) => from(functions).pipe(\n        observeOn(schedulers.insideAngular),\n        switchMap(functions => functions.httpsCallable(name)(data)),\n        map(r => r.data as R)\n      );\n\n    return ɵlazySDKProxy(this, functions, zone);\n\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { AngularFireFunctions } from './functions';\n\n@NgModule({\n  providers: [ AngularFireFunctions ]\n})\nexport class AngularFireFunctionsModule { }\n"]}